<mvc:View xmlns:layout="sap.suite.ui.commons.networkgraph.layout" controllerName="iot.planner.components.managecategories.controller.Graph" displayBlock="true"
    xmlns="sap.ui.table"
    xmlns:f="sap.f"
    xmlns:m="sap.m"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:mvc="sap.ui.core.mvc">
    <f:DynamicPage>
        <f:header>
            <f:DynamicPageHeader>
                <f:content>
                    <fb:FilterBar header="{i18n>graph}" considerGroupTitle="true" reset="onReset" search="loadData" showRestoreButton="true" useToolbar="false" showClearButton="true" showGoOnFB="true">
                        <fb:filterGroupItems >
                            <!-- <fb:FilterGroupItem label="{i18n>search}" groupName="search" name="search" partOfCurrentVariant="true" visibleInFilterBar="true">
                                <fb:control>
                                    <m:SearchField search="onSearch" />
                                </fb:control>
                            </fb:FilterGroupItem> -->
                            <fb:FilterGroupItem label="{i18n>dateFrom}" groupName="dateFrom" name="dateFrom" partOfCurrentVariant="true" visibleInFilterBar="true">
                                <fb:control>
                                    <m:DatePicker value="{path: 'viewModel>/dateFrom', type: 'sap.ui.model.type.Date', formatOptions: {style: 'medium'}}"/>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem label="{i18n>dateUntil}" groupName="dateUntil" name="dateUntil" partOfCurrentVariant="true" visibleInFilterBar="true">
                                <fb:control>
                                    <m:DatePicker value="{path: 'viewModel>/dateUntil', type: 'sap.ui.model.type.Date', formatOptions: {style: 'medium'}}"/>
                                </fb:control>
                            </fb:FilterGroupItem>
                        </fb:filterGroupItems>
                    </fb:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <TreeTable id="treeTable" selectionMode="Multi" rowSelectionChange="onSelect" showNoData="true" rows="{path: '/CategoriesCumulativeDurations', 
        sorter: {path: 'accumulatedDuration', comparator: '.sortDecimals'},
        parameters: {numberOfExpandedLevels: 0, arrayNames: ['children']}}" visibleRowCount="20" selectionBehavior="Row" enableBusyIndicator="true" rowActionCount="3" sort="onSort" rowsUpdated="onRowsUpdated">
                <extension>
                    <m:Toolbar width="100%">
                        <m:Button icon="sap-icon://collapse" press="collapseAll"/>
                        <m:Button icon="sap-icon://expand" press="expand"/>
                    </m:Toolbar>
                </extension>
                <columns>
                    <Column label="{i18n>title}">
                        <template>
                            <m:Text text="{title}"/>
                        </template>
                    </Column>
                    <Column label="{i18n>deepReference}" width="15%">
                        <template>
                            <m:Text text="{deepReference}"/>
                        </template>
                    </Column>
                    <Column label="{i18n>relativeDuration}">
                        <template>
                            <m:ProgressIndicator displayValue="0%" showValue="true" state="None" displayOnly="true" />
                        </template>
                    </Column>
                    <Column label="{i18n>totalDuration}" hAlign="End" width="15%">
                        <template>
                            <m:ObjectNumber number="{path: 'totalDuration', formatter: '.formatter.toFixed0'}" unit="{=${totalDuration} ? 'h' : ''}" textAlign="End"/>
                        </template>
                    </Column>
                    <Column label="{i18n>accumulatedDuration}" hAlign="End" width="15%">
                        <template>
                            <m:ObjectNumber number="{path: 'accumulatedDuration', formatter: '.formatter.toFixed0'}" unit="{=${accumulatedDuration} ? 'h' : ''}" textAlign="End"/>
                        </template>
                    </Column>
                </columns>
            </TreeTable>
        </f:content>
    </f:DynamicPage>
</mvc:View>